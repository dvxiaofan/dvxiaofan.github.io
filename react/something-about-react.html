<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React相关热点问题笔记 | WebCoder</title>
    <meta name="description" content="Something Good Will Be Happen!">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.e9601a0f.css" as="style"><link rel="preload" href="/assets/js/app.6aa71e18.js" as="script"><link rel="preload" href="/assets/js/39.1dfd2114.js" as="script"><link rel="prefetch" href="/assets/js/2.0acebc94.js"><link rel="prefetch" href="/assets/js/3.a6860445.js"><link rel="prefetch" href="/assets/js/4.062059eb.js"><link rel="prefetch" href="/assets/js/5.c429bb8c.js"><link rel="prefetch" href="/assets/js/6.d128dc6e.js"><link rel="prefetch" href="/assets/js/7.cbba3ae8.js"><link rel="prefetch" href="/assets/js/8.3c6dc26f.js"><link rel="prefetch" href="/assets/js/9.cfd13805.js"><link rel="prefetch" href="/assets/js/10.e35277f4.js"><link rel="prefetch" href="/assets/js/11.705f9ff8.js"><link rel="prefetch" href="/assets/js/12.cb41ee43.js"><link rel="prefetch" href="/assets/js/13.41a18b7e.js"><link rel="prefetch" href="/assets/js/14.e3f76a17.js"><link rel="prefetch" href="/assets/js/15.e1f9e6a4.js"><link rel="prefetch" href="/assets/js/16.7b107a33.js"><link rel="prefetch" href="/assets/js/17.5c8b104d.js"><link rel="prefetch" href="/assets/js/18.af2929fc.js"><link rel="prefetch" href="/assets/js/19.b9785ceb.js"><link rel="prefetch" href="/assets/js/20.646646e8.js"><link rel="prefetch" href="/assets/js/21.ec6d4d4b.js"><link rel="prefetch" href="/assets/js/22.4ccec226.js"><link rel="prefetch" href="/assets/js/23.9937204e.js"><link rel="prefetch" href="/assets/js/24.01d73bb3.js"><link rel="prefetch" href="/assets/js/25.da968f5d.js"><link rel="prefetch" href="/assets/js/26.b218202b.js"><link rel="prefetch" href="/assets/js/27.e1017f61.js"><link rel="prefetch" href="/assets/js/28.08b2495a.js"><link rel="prefetch" href="/assets/js/29.ef1026b4.js"><link rel="prefetch" href="/assets/js/30.cb8b0704.js"><link rel="prefetch" href="/assets/js/31.99c0e8a4.js"><link rel="prefetch" href="/assets/js/32.949d2f08.js"><link rel="prefetch" href="/assets/js/33.ef14c555.js"><link rel="prefetch" href="/assets/js/34.5d0aff86.js"><link rel="prefetch" href="/assets/js/35.7946d01d.js"><link rel="prefetch" href="/assets/js/36.a2ec7073.js"><link rel="prefetch" href="/assets/js/37.d822e6ba.js"><link rel="prefetch" href="/assets/js/38.4eaedf76.js"><link rel="prefetch" href="/assets/js/40.8c86d158.js"><link rel="prefetch" href="/assets/js/41.40f73d3f.js"><link rel="prefetch" href="/assets/js/42.bc9d61d5.js"><link rel="prefetch" href="/assets/js/43.6904307b.js"><link rel="prefetch" href="/assets/js/44.f649f7a2.js"><link rel="prefetch" href="/assets/js/45.710693b4.js"><link rel="prefetch" href="/assets/js/46.4b2e8ff4.js"><link rel="prefetch" href="/assets/js/47.5fa2d420.js"><link rel="prefetch" href="/assets/js/48.772d62a6.js"><link rel="prefetch" href="/assets/js/49.6d3f5d32.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e9601a0f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">WebCoder</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link router-link-active">React</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tool</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/echarts/" class="nav-link">Echarts</a></li></ul></div></div><div class="nav-item"><a href="/other/" class="nav-link">Others</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div> <a href="https://github.com/dvxiaofan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link router-link-active">React</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tool</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/echarts/" class="nav-link">Echarts</a></li></ul></div></div><div class="nav-item"><a href="/other/" class="nav-link">Others</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div> <a href="https://github.com/dvxiaofan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div class="carbon-ads"></div> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>React</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/react/" class="sidebar-link">重学 React 笔记：深入 JSX</a></li><li><a href="/react/02.html" class="sidebar-link">重学 React 笔记：使用 PropTypes 进行类型检查</a></li><li><a href="/react/react-webpack.html" class="sidebar-link">使用 webpack 搭建一个简单的 React 脚手架</a></li><li><a href="/react/React-setState.html" class="sidebar-link">React中的setState执行机制</a></li><li><a href="/react/something-about-react.html" class="active sidebar-link">React相关热点问题笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_1-setstate是异步还是同步？" class="sidebar-link">1. setState是异步还是同步？</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_2-react16-4-生命周期" class="sidebar-link">2. React16.4+ 生命周期</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_3-useeffect-fn-和componentdidmount-有什么差异？" class="sidebar-link">3. useEffect(fn, [])和componentDidMount 有什么差异？</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_4-hooks为什么不能放在条件判断里" class="sidebar-link">4. hooks为什么不能放在条件判断里</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_5-fiber是什么" class="sidebar-link">5.  fiber是什么</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_6-diff算法" class="sidebar-link">6. diff算法</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_7-调用setstate之后发生了什么" class="sidebar-link">7. 调用setState之后发生了什么</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_8-为什么虚拟dom会提高性能" class="sidebar-link">8. 为什么虚拟DOM会提高性能</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_9-错误边界是什么？有什么用？" class="sidebar-link">9. 错误边界是什么？有什么用？</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_10-什么是portals" class="sidebar-link">10. 什么是Portals</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_11-react组件间有哪些通信方式" class="sidebar-link">11. React组件间有哪些通信方式</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_12-react父组件如何调用子组件中的方法" class="sidebar-link">12. React父组件如何调用子组件中的方法</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_13-react有哪些优化性能的手段" class="sidebar-link">13. React有哪些优化性能的手段</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_14-为什么react元素有一个-typeof属性" class="sidebar-link">14. 为什么React元素有一个 $$typeof属性</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_15-react如何区分-class组件-和-function组件" class="sidebar-link">15. React如何区分  Class组件 和 FUnction组件</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_16-html-和-react-事件处理有什么区别" class="sidebar-link">16. HTML 和 React 事件处理有什么区别</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_17-什么是-suspense-组件" class="sidebar-link">17. 什么是 suspense 组件</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_18-为什么-jsx-中组件名要以大写字母开头" class="sidebar-link">18. 为什么 JSX 中组件名要以大写字母开头</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_19-redux是什么" class="sidebar-link">19. redux是什么</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_20-react-redux-的实现原理" class="sidebar-link">20. react-redux 的实现原理</a></li><li class="sidebar-sub-header"><a href="/react/something-about-react.html#_21-redux-和-mobx-的却别" class="sidebar-link">21. Redux 和 mobx 的却别</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="react相关热点问题笔记"><a href="#react相关热点问题笔记" aria-hidden="true" class="header-anchor">#</a> React相关热点问题笔记</h1> <h2 id="_1-setstate是异步还是同步？"><a href="#_1-setstate是异步还是同步？" aria-hidden="true" class="header-anchor">#</a> 1. setState是异步还是同步？</h2> <ol><li>合成事件中是异步</li> <li>钩子函数中是异步</li> <li>原生事件中是同步</li> <li>setTimeout中是同步</li></ol> <h2 id="_2-react16-4-生命周期"><a href="#_2-react16-4-生命周期" aria-hidden="true" class="header-anchor">#</a> 2. React16.4+ 生命周期</h2> <p><img src="http://img.ccyou.icu/20210716/image-20210409171026160.png" alt="image-20210409171026160"></p> <h2 id="_3-useeffect-fn-和componentdidmount-有什么差异？"><a href="#_3-useeffect-fn-和componentdidmount-有什么差异？" aria-hidden="true" class="header-anchor">#</a> 3. useEffect(fn, [])和componentDidMount 有什么差异？</h2> <p><code>useEffect</code>会捕获<code>props</code>和<code>state</code>。所以即便在回调函数里，你拿到的还是初识的props和state。如果想得到最新的值，可以使用ref</p> <h2 id="_4-hooks为什么不能放在条件判断里"><a href="#_4-hooks为什么不能放在条件判断里" aria-hidden="true" class="header-anchor">#</a> 4. hooks为什么不能放在条件判断里</h2> <p>已setState为例，在React内部，每个组件的hooks都是以链表的形式存在memoizeState属性中：</p> <p><img src="http://img.ccyou.icu/20210716/image-20210409171523230.png" alt="image-20210409171523230"></p> <p>update阶段，每次调用setState，链表就会执行next向后移动一步。如果将setState写在条件判断语句中，假设条件判断不成立，么有执行里面setState方法，会导致接下来所有的setState的取值出现偏移，从而导致异常发生。</p> <h2 id="_5-fiber是什么"><a href="#_5-fiber是什么" aria-hidden="true" class="header-anchor">#</a> 5.  fiber是什么</h2> <p>React Filber 是一种基于浏览器的单线程调度算法。</p> <p>React Fiber是类似 requestIdleCallback 的机制来做异步diff。但是之前数据结构不支持这样实现异步diff，浴室React实现了一个类似链表的数据结构，将原来的递归diff变成了现在的遍历diff， 这样就能做到异步可更新了。</p> <p><img src="http://img.ccyou.icu/20210716/image-20210409171924246.png" alt="image-20210409171924246"></p> <h2 id="_6-diff算法"><a href="#_6-diff算法" aria-hidden="true" class="header-anchor">#</a> 6. diff算法</h2> <p>传统diff算法的时间复杂度是O(n^3)，这在前端render中是不可接受的。为了降低时间复杂度，React的diff算法做了一些妥协，放弃了最优解，最终将时间复杂度降到了O(n)。</p> <p>主要妥协：</p> <ol><li>tree diff： 只对比同一层的dom节点， 忽略 dom  节点的夸层级移动</li> <li>component diff： 如果不是同一类型组件，就会删除旧组件，创建新的组件。</li> <li>element diff： 对于同一级的一组子节点，需要通过唯一 id 进行区分，如果么有唯一id， 一旦有插入动作，会导致插入位置之后的列表全部重新渲染。这也是为什么渲染列表时为什么要使用唯一的key</li></ol> <h2 id="_7-调用setstate之后发生了什么"><a href="#_7-调用setstate之后发生了什么" aria-hidden="true" class="header-anchor">#</a> 7. 调用setState之后发生了什么</h2> <ol><li>在 setState 的时候，React会为当前节点创建一个 updateQueue的更新队列</li> <li>然后会触发 reconciliation 过程，在这个过程中，会使用名为 Fiber 的调度算法，开始生成新的Fiber 树，Fiber 算法的最大特点是可以做到异步可中断的执行。</li> <li>然后 React Scheduler 会根据优先级高低，先执行优先级高的节点，具体是执行 doWork 方法</li> <li>在 doWork 方法中， React会执行一遍 updateQueue 中的方法， 以获得新的节点。 然后对比新旧节点， 为老节点打上 更新、插入、替换 等tag</li> <li>当前节点 doWork 完成后，会执行performUnitOfWork 方法获得新节点，然后再重复上面的过程。</li> <li>当素有节点都 doWork 完成后， 会触发 commitRoot 方法， React进入commit 阶段</li> <li>在commit阶段汇总， React会根据前面为各个节点打的tag， 一次性更新整个DOM元素</li></ol> <h2 id="_8-为什么虚拟dom会提高性能"><a href="#_8-为什么虚拟dom会提高性能" aria-hidden="true" class="header-anchor">#</a> 8. 为什么虚拟DOM会提高性能</h2> <p>虚拟DOM相当于在JS和真是DOM之间加了一个缓存，利用diff算法避免了没有必要的DOM操作，从而提高性能</p> <h2 id="_9-错误边界是什么？有什么用？"><a href="#_9-错误边界是什么？有什么用？" aria-hidden="true" class="header-anchor">#</a> 9. 错误边界是什么？有什么用？</h2> <p>在React中，如果任何一个组件发生错误， 它将破坏整个组件树，导致整页白屏。这时候我们可以用错误边界优雅地降级处理这些错误</p> <p>举例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ErrorBoundary</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>IProps<span class="token punctuation">,</span> IState<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> hasError<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> hasError<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> errorInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件崩溃 Error: '</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件崩溃 Error: '</span><span class="token punctuation">,</span> errorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_10-什么是portals"><a href="#_10-什么是portals" aria-hidden="true" class="header-anchor">#</a> 10. 什么是Portals</h2> <p>Portal 提供了一种将子节点渲染到存在于父组件以外的DOM节点的优秀方案</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> container	<span class="token punctuation">)</span>
</code></pre></div><h2 id="_11-react组件间有哪些通信方式"><a href="#_11-react组件间有哪些通信方式" aria-hidden="true" class="header-anchor">#</a> 11. React组件间有哪些通信方式</h2> <ul><li>父组件向子组件通信
<ul><li>通过props</li></ul></li> <li>子组件向父组件通信
<ul><li>主动调用通过props传过来的方法，并将想要传递的信息，作为参数，传递到父组件的作用域中</li></ul></li> <li>夸层级 通信
<ul><li>使用React自带的Context进行通信，createContext创建上下文，useContext使用上下文<img src="http://img.ccyou.icu/20210716/code.png" alt="code"></li> <li>使用Redux或者Mobox等状态管理库</li> <li>使用订阅发布模式</li></ul></li></ul> <h2 id="_12-react父组件如何调用子组件中的方法"><a href="#_12-react父组件如何调用子组件中的方法" aria-hidden="true" class="header-anchor">#</a> 12. React父组件如何调用子组件中的方法</h2> <ol><li>如果是在方法组件中调用子组件，可以使用useRef和useImperativeHandle<img src="http://img.ccyou.icu/20210716/code-8193235.png" alt="code"></li> <li>如果实在类组件中调用子组件，可以使用createRef<img src="http://img.ccyou.icu/20210716/code-8193492.png" alt="code"></li></ol> <h2 id="_13-react有哪些优化性能的手段"><a href="#_13-react有哪些优化性能的手段" aria-hidden="true" class="header-anchor">#</a> 13. React有哪些优化性能的手段</h2> <ul><li>类组件中的优化手段
<ul><li>使用纯组件 PureComponent 作为基类</li> <li>使用 React.memo 高阶函数包装组件</li> <li>使用 shouldComonentUpdate 声明周期函数来自定义渲染逻辑</li></ul></li> <li>方法组件中的优化手段
<ul><li>使用 useMemo</li> <li>使用useCallBack</li></ul></li> <li>其他方式
<ul><li>在列表需要频繁变动时，使用唯一 id 作为 key， 而不是数组下标</li> <li>必要时通过改变 CSS 样式隐藏显示组件，而不是通过条件判断显示隐藏组件。</li> <li>使用 Suspense 和 lazy 进行懒加载，例如：<img src="http://img.ccyou.icu/20210716/code-8194072.png" alt="code"></li></ul></li></ul> <h2 id="_14-为什么react元素有一个-typeof属性"><a href="#_14-为什么react元素有一个-typeof属性" aria-hidden="true" class="header-anchor">#</a> 14. 为什么React元素有一个 $$typeof属性</h2> <p>为了防止XSS攻击，因为 Synbol 无法被序列化，所以React可以通过有没有这个属性来判断当前的 element 对象是从数据库来的还是自己生成的。</p> <p>如果没有这个属性， React 会拒绝处理该元素</p> <h2 id="_15-react如何区分-class组件-和-function组件"><a href="#_15-react如何区分-class组件-和-function组件" aria-hidden="true" class="header-anchor">#</a> 15. React如何区分  Class组件 和 FUnction组件</h2> <p>一般的方式是借助 typeof 和 Function。prototype。toString 来判断当前是不是class，但存在弊端，因为如果使用了babel 等编译工具，会将clas 写法全部转换为function  写法， 判断就回失效</p> <p>React 区分 Class 组件 和 Function 组件的方式很巧妙，由于素有的类组件都要继承 React.Component， 所以只要判断原型链上是否有 React.Component 就可以了。</p> <h2 id="_16-html-和-react-事件处理有什么区别"><a href="#_16-html-和-react-事件处理有什么区别" aria-hidden="true" class="header-anchor">#</a> 16. HTML 和 React 事件处理有什么区别</h2> <p>在HTML中事件名必须小写： <code>&lt;button onclick='activateLasers()'&gt;</code></p> <p>而在React中药遵循驼峰写法： <code>&lt;button onClick={activateLasers}&gt;</code></p> <p>在HTML中阻止默认的行为可以使用返回 false</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">'#'</span> onclick<span class="token operator">=</span><span class="token string">'console.log(&quot;The link was clicked.&quot;); return false;'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>而在React中必须明确调用 <code>preventDefault</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The link was clicked.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_17-什么是-suspense-组件"><a href="#_17-什么是-suspense-组件" aria-hidden="true" class="header-anchor">#</a> 17. 什么是 suspense 组件</h2> <p>Suspense 让组件 “等待” 某个异步操作，直到该异步操作结束后才可渲染；</p> <p><img src="http://img.ccyou.icu/20210716/image-20210412113232908.png" alt="image-20210412113232908"></p> <p>Suspense 也可以用于懒加载</p> <p><img src="http://img.ccyou.icu/20210716/image-20210412113412174.png" alt="image-20210412113412174"></p> <h2 id="_18-为什么-jsx-中组件名要以大写字母开头"><a href="#_18-为什么-jsx-中组件名要以大写字母开头" aria-hidden="true" class="header-anchor">#</a> 18. 为什么 JSX 中组件名要以大写字母开头</h2> <p>因为React要知道当前渲染的是组件还是HTML元素</p> <h2 id="_19-redux是什么"><a href="#_19-redux是什么" aria-hidden="true" class="header-anchor">#</a> 19. redux是什么</h2> <p>Redux 是一个为JavaScript应用设计的，可预测的状态容器。</p> <p>解决的问题：</p> <ul><li>跨层级之间传递数据变得容易</li> <li>所有对状态的改变都需要dispatch，使得整个数据的改变可追踪</li></ul> <p>缺点：</p> <ul><li>概念偏多，理解起来不容易</li> <li>样板代码太多</li></ul> <h2 id="_20-react-redux-的实现原理"><a href="#_20-react-redux-的实现原理" aria-hidden="true" class="header-anchor">#</a> 20. react-redux 的实现原理</h2> <p>通过redux 和 react context 配合使用，并借助高阶函数， 实现了 react-redux</p> <h2 id="_21-redux-和-mobx-的却别"><a href="#_21-redux-和-mobx-的却别" aria-hidden="true" class="header-anchor">#</a> 21. Redux 和 mobx 的却别</h2> <p>得益于 mobx 的 observable， 会用mobx可以做到精准更新， 对应的Redux 是用dispatch 进行广播，通过Provider 和connect 来对比前后差别控制更新粒度</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间: </span> <span class="time">2021/7/16 上午10:17:09</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/react/React-setState.html" class="prev">
          React中的setState执行机制
        </a></span> <!----></p></div> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div> <!----></div></div>
    <script src="/assets/js/39.1dfd2114.js" defer></script><script src="/assets/js/app.6aa71e18.js" defer></script>
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?c3446600de53c605ba4f6c792e47dff9";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  </body>
</html>
